<html>
<!--                                                                      -->
<!-- jMax                                                                 -->
<!--                                                                      -->
<!-- Copyright (C) 1999 by IRCAM                                          -->
<!-- All rights reserved.                                                 -->
<!--                                                                      -->
<!-- This program may be used and distributed under the terms of the      -->
<!-- accompanying LICENSE.                                                -->
<!--                                                                      -->
<!-- This program is distributed WITHOUT ANY WARRANTY. See the LICENSE    -->
<!-- for DISCLAIMER OF WARRANTY.                                          -->
<!--                                                                      -->
<head>
<title>jMax Documentation</title>
</head>

<body bgcolor="white">

<table width=100% border=0 cellspacing=0 cellpadding=0>
<tr>
  <td align=left valign=top>
    <a href="http://www.ircam.fr/jmax/"><img src="images/jmax_logo_small_transp.gif" border=0 alt="jMax"></A>
  </td>
  <td align=right valign=top>
    <a href="http://www.ircam.fr/"><img src="images/ircam_banner.gif" border=0 alt="IRCAM - Centre Georges Pompidou"></a>
  </td>
</tr>

</table>


<table width=75% border=0 cellspacing=0 cellpadding=0>

<tr>
<td><spacer type="block" height="1" width="1"></td>
</tr>

<tr>
<td align=right><font size=+3><b>Configuration</b></font></td>
</tr>

<tr>
<td align=right valign=top><a href="index.html"><font size=-1>jMax Documentation</font></a></td>
</tr>

<tr>
<td><spacer type="block" height="1" width="1"></td>
</tr>

</table>

<!-- ---------------------------------------------------------------------- -->
<!-- ---------------------------------------------------------------------- -->
<!-- End of header                                                          -->
<!-- ---------------------------------------------------------------------- -->
<!-- ---------------------------------------------------------------------- -->

<p>
<UL TYPE=DOT>
  <LI><A HREF="#Disclaimer">Disclaimer</A>
  <LI><A HREF="#Introduction">Introduction</A>
  <LI><A HREF="#Host Parameters">Host Parameters</A>
  <LI><A HREF="#Miscellaneous Parameters">Miscellaneous Parameters</A>
  <LI><A HREF="#Audio Configuration">Audio Configuration</A>
  <LI><A HREF="#MIDI Configuration">MIDI Configuration</A>
  <LI><A HREF="#Host type">Host type</A>
  <LI><A HREF="#The file .jmaxrc">The file .jmaxrc</A>
</UL>

<!-- ---------------------------------------------------------------------- -->
<P>
<HR>
<A NAME="Disclaimer"><H2>Disclaimer</H2></A>

<P>
The configuration functionnalities described in this document
are based on the current implementation that uses Tcl as a scripting language.

<P>
Future versions of jMax will probably provide configuration functionnality
in a completely different way by mean of configuration patches.

<P>
As a result, the functionnalities described here will change, will be implemented 
with a different language and/or syntax, or will simply vanish.


<!-- ---------------------------------------------------------------------- -->
<P>
<HR>
<A NAME="Introduction"><H2>Introduction</H2></A>

<P>
The system configuration is based on system parameters that 
can be set 
<ul>
<li> either by setting a TCL variable in the <tt>.jmaxrc</tt> file
<li> or by giving a command line argument when running jMax
</ul>

<P>
Since a patch can be used on different platforms, platform specific information 
should not be included in the patches themselves, but specified in site, user or 
project configuration files.


<!-- ---------------------------------------------------------------------- -->
<p>
<HR>
<A NAME="Host Parameters"><H2>Host Parameters</H2></A>

<p>
Since jMax has a client/server architecture the host parameters are to be set
in order to specify the host on which the jMax server should be run.
By default this is the local host where jMax is launched (and so the client is started up).

<p>
<DL>
  <DT><tt><b>jmaxHost</tt></b><P>
  <DD>
    Specifies the host where to run the server.
    The value can be either </tt>local</tt> (default) to specify the host where the client run, 
    or a complete canonical internet name for an other host, like <tt>mymachine.mycompany.com</tt>.<BR>
    Beware that jMax currently uses the <tt>rsh</tt> Unix command to run 
    the server remotely, so in order to work you must set your <tt>.rhosts</tt>
    file correctly (see the <tt>rsh</tt> and <tt>rhosts</tt> man page for details).<p>

  <DT><tt><b>jmaxHostType</tt></b><P>
  <DD>
    Sets the type of the host running the server.<BR>
    The host type determines the hardware architecture.<BR>
    See the index of <A HREF="#Host type">supported host types</A>.<p>

  <DT><tt><b>jmaxArch</b></tt><P>
  <DD> 
    Sets the hardware architecture of the host running the server.<BR>
    It is used to choose the proper binaries for the given architecture.<BR>
    This parameter is set automaticaly and derived from the <tt><b>jmaxHostType</tt></b>
    parameter, so it must not be set by the user.
</DL>


<!-- ---------------------------------------------------------------------- -->
<P>
<HR>
<A NAME="Miscellaneous Parameters"><H2>Miscellaneous Parameters</H2></A>

<DL>
  <DT><tt><b>jmaxConnection</b></tt><P>
  <DD>
    Choose the kind of connection between the Java client and the server;
    Supported values are currently <i>udp</i> (default) for an UDP based connection, 
    and <i>client</i> for a TCP based connection.
    UDP will give a better real time response for controllers. 
    Use TCP only if your network is complex and you need the reialability of a TCP connection.<p>

  <DT><tt><b>jmaxSplashScreen</b></tt><P>
  <DD>
    If this value is <i>hide</i> the splash screen will not be shown during startup.<br>
    The deafault value is <i>show</i>.<p>

  <DT><tt><b>jmaxFastFileBox</b></tt><P>
  <dd>
    If the value is <i>true</i>, the file selection box used by
    jMax will not shown specific icons for known file types, and
    will always show all the files in a directory, and not only the files
    of a known file type, so it's use will be substantially faster. <br>
    Depending on your installation, the default speed can be ok, or you
    may need to specify this option.<p>

  <DT><tt><b>jmaxDefaultFont</b></tt><P>
  <DD> 
    Specify the default font used in the patch editor.<br>
    Default to <i>SansSerif</i>.
</DL>


<!-- ---------------------------------------------------------------------- -->
<P>
<HR>
<A NAME="Audio Configuration"><H2>Audio Configuration</H2></A>

<P>
The following set of commands handles the audio configuration.
The first two of them are used to set the audio configuration parameters
and should be used before the others.

<DL>
  <DT><tt><b>jmaxSetSampleRate</b></tt> <i>sr</i><p>
  <DD> 
    Set the jMax global sampling rate.<BR>
    (<b>Note</b>: For now, the user himself must keep the sampling rate 
    given for jMax consistent with the settings of the physical 
    device using the utillities provided by the operating system, like
    the SGI <tt>audiopanel</tt> application.)<p>

  <DT><tt><b>jmaxSetAudioBuffer</b></tt> <i>buf</i><p>
  <DD> 
    Set the length of the audio buffer used, i.e. the length, in samples, 
    of the output FIFO used to compensate the variation of load in jMax.
    Typical values are between <tt>256</tt> and <tt>1024</tt>, can be more
    or less depending on the application.<BR>
    Lower values cause lower i/o latencies, while higher values reduce possible
    audio clicks caused by system overloads.<p>

  <DT><tt><b>defaultAudio</b></tt> <i>audioPortClass</i> <i>arguments...</i><p>
  <DD>
    Open the default audio port:<BR>
    <i>audioPortClass</i> is the class of the audio port<BR>
    <i>arguments...</i> are the instanciation arguments<BR>
    The audio port class is architecture-dependant.<BR>
    Current values are:
    <UL>
    <LI>on Linux: <TT>ossaudioport</TT>, located in package <TT>oss</TT> or
     <TT>alsaaudioport</TT>, located in package <TT>alsa</TT>
    <LI>on SGI: <TT>sgiaudioport</TT>, located in package <TT>sgi</TT>
    </UL>

    <P>
     Refer to the summary patches of these packages for further information
     on audio port's arguments

</DL>

<!-- ---------------------------------------------------------------------- -->
<P>
<HR>
<A NAME="MIDI Configuration"><H2>MIDI Configuration</H2></A>

<P>
These commands handle the MIDI configuration:

<DL>
  <DT><tt><b>defaultMidi</b></tt> <i>midiPortClass</i> <i>arguments...</i><p>
  <DD>
    Open the default MIDI port, i.e. the port used by all the MIDI objects without a MIDI port argument:<BR>
    <i>midiPortClass</i> is the class of the MIDI port<BR>
    <i>arguments...</i> are the instanciation arguments<BR>
    The MIDI port class is architecture-dependant.<BR>
    Current values are:
    <UL>
    <LI>on Linux: <TT>rawmidiport</TT>, located in package <TT>midi</TT> or
     <TT>midishareport</TT>, located in package <TT>midishare</TT>
    <LI>on SGI: <TT>sgimidiport</TT>, located in package <TT>sgi</TT>
    </UL>

    <P>
     Refer to the summary patches of these packages for further information
     on MIDI port's arguments
    <P>
</DL>

<!-- ---------------------------------------------------------------------- -->
<P>
<HR>
<A NAME="Host type"><H2>Host type</H2></A>

<P>
Following host types are defined:

<P>
<CENTER>
<TABLE BORDER=0 CELLSPACING=1 CELLPADDING=5 BGCOLOR=#CCCCCC>
<TR>
<TD ALIGN=RIGHT>jmaxHostType</TD><TD><b>machine</b></TD> <TD><b>CPU</b></TD> <TD><b>jmaxArch</b></TD>
</TR>
<TR>
<TD ALIGN=RIGHT><b>o2r5k</b></TD> <TD>SGI O2</TD> <TD>R5000</TD> <TD>r5k-irix6.5</TD> 
</TR>
<TR>
<TD ALIGN=RIGHT><b>o2r10k</b></TD> <TD>SGI O2</TD> <TD>R10000</TD> <TD>r10k-irix6.5</TD> 
</TR>
<TR>
<TD ALIGN=RIGHT><b>octane</b></TD> <TD>SGI Octane</TD> <TD>R10000</TD> <TD>r10k-irix6.5</TD> 
</TR>
<TR>
<TD ALIGN=RIGHT><b>origin</b></TD> <TD>SGI Origin 200/2000</TD> <TD>R10000</TD> <TD>r10k-irix6.5</TD> 
</TR>
<TR>
<TD ALIGN=RIGHT><b>linuxpc</b></TD> <TD>PC</TD> <TD>Pentium</TD> <TD>i686-linux</TD> 
</TR>
</TABLE>
</CENTER>


<!-- ---------------------------------------------------------------------- -->
<p>
<A NAME=".jmaxrc">
<HR>
<A NAME="The file .jmaxrc"><H2>The file .jmaxrc</H2></A>

<P>
The user can customize the jMax environment including the configuration parameters
in the <TT>.jmaxrc</TT> file in his home directory:

<UL>
  <LI>set the <A HREF="configuration.html">configuration</A>
  <LI>customize the <A HREF="project-package.html">project environment</A> for your patches
  <LI>preload jMax <A HREF="project-package.html">packages</A>
</UL>

<P>
The configuration parameters set in the <TT>.jmaxrc</TT> file overwrite the site specific
default values (see down) and they are overwritten by values set via the command line.

<P>
<strong>NOTE:</strong>
In the current release the system and i/o configuration 
<strong>must</strong> be set in the <TT>.jmaxrc</TT> file.

<p>
The file is loaded at startup and can contain any TCL code.<BR>
It is possible to declare declare a number of <I>hooks</I>. 
These hooks contain TCL code that will be executed at precise points during the initialization process.
In particular, the <B><I>start</I></B> hook is executed after server start and must be used for I/O, 
environment and package loading purpose.

<P>
A template <TT>.jmaxrc</TT> file is the following:

<PRE>
# Lines starting with # are comments
# --- beginning of .jmaxrc

set jmaxFastFileBox "true"

when start {
if {$jmaxHost == "astor.ircam.fr"} {
# SGI Origin
	jmaxSetSampleRate 44100
	jmaxSetAudioBuffer 1024

	defaultAudio sgiaudioport "RAD2.ADATIn" 8 "RAD2.ADATOut" 8

} elseif {$jmaxHost=="lipari.ircam.fr"} {
# Linux box with a Hammerfall card
	jmaxSetSampleRate 44100
	jmaxSetAudioBuffer 512

	defaultAudio alsaaudioport "hw:0,0" 18 18 S32_LE mmap_noninterleaved
}
}

# --- end of .jmaxrc
</PRE>



</td></tr>
</table>

<!-- ---------------------------------------------------------------------- -->
<!-- ---------------------------------------------------------------------- -->
<!-- Beginning of footer                                                    -->
<!-- ---------------------------------------------------------------------- -->
<!-- ---------------------------------------------------------------------- -->

<p>
<table width=100% border=0 cellspacing=0 cellpadding=0>

<tr>
<td><spacer type="block" height="20" width="1"></td>
</tr>

<tr>
<td bgcolor="#cccccc"><spacer type="block" height="1" width="1"></td>
</tr>

<tr>
<td><spacer type="block" height="20" width="1"></td>
</tr>

<tr>
<td align=right><font size=-2>
Copyright &copy; 1995,1999 <a href="http://www.ircam.fr/">IRCAM</a>.<br>
All rights reserved.
</font></td>
</tr>

</table>

</body>
</html>
