<html>
<!--                                                                      -->
<!-- jMax                                                                 -->
<!--                                                                      -->
<!-- Copyright (C) 1999 by IRCAM                                          -->
<!-- All rights reserved.                                                 -->
<!--                                                                      -->
<!-- This program may be used and distributed under the terms of the      -->
<!-- accompanying LICENSE.                                                -->
<!--                                                                      -->
<!-- This program is distributed WITHOUT ANY WARRANTY. See the LICENSE    -->
<!-- for DISCLAIMER OF WARRANTY.                                          -->
<!--                                                                      -->
<head>
<title>jMax Documentation</title>
</head>

<body bgcolor="white">

<table width=100% border=0 cellspacing=0 cellpadding=0>
<tr>
  <td align=left valign=top>
    <a href="http://www.ircam.fr/jmax/"><img src="images/jmax_logo_small_transp.gif" border=0 alt="jMax"></A>
  </td>
  <td align=right valign=top>
    <a href="http://www.ircam.fr/"><img src="images/ircam_banner.gif" border=0 alt="IRCAM - Centre Georges Pompidou"></a>
  </td>
</tr>

</table>


<table width=75% border=0 cellspacing=0 cellpadding=0>

<tr>
<td><spacer type="block" height="1" width="1"></td>
</tr>

<tr>
<td align=right><font size=+3><b>Running <i>j</i>Max</b></font></td>
</tr>

<tr>
<td align=right valign=top><a href="index.html"><font size=-1><i>j</i>Max Documentation</font></a></td>
</tr>

<tr>
<td><spacer type="block" height="1" width="1"></td>
</tr>

</table>

<!-- ---------------------------------------------------------------------- -->
<!-- ---------------------------------------------------------------------- -->
<!-- End of header                                                          -->
<!-- ---------------------------------------------------------------------- -->
<!-- ---------------------------------------------------------------------- -->


<p>
<ul type=dot>
  <li><a href="#running">Running jMax</a>
  <li><a href="#arguments">Command Line Arguments</a>
  <li><a href="#.jmaxrc">The file <TT>.jmaxrc</TT></a>
</ul>

<p>
<hr size=1>

<A NAME="running">
<h2>Running <I>j</I>Max</h2>

<p>
<i>j</i>Max can be run by executing the <code>jmax</code> shell script.
This script is located in the following directories:
<ul>
<li> <code>/usr/bin</code> if <i>j</i>Max has been installed (note that
this directory may vary depending on your platform)
<li> <code>&lt;jMax root directory&gt;/bin</code> if <i>j</i>Max has not
been installed and is ran from a source distribution. In this case, the
<code>-root</code> option must be passed to the <code>jmax</code> script
</ul>

<p>
This script accepts a set of options (see <B><TT> jmax -help </TT></B> for description)
that are either interpreted by the script or passed as command line arguments
to the Java application.

<p>
The <code>-root</code> option of the <code>jmax</code> script specifies the
<i>root directory</i>, i.e. where the <i>j</i>Max resources (Java classes, server binaries, 
configuration files, standard packages, ...) are located. <i>j</i>Max 
default root directory is <code>/usr/lib/jmax</code> and the installation
process (either 'make install' or platform-specific installer) places
resources there. If running from a source distribution, the 
<code>-root</code> option must be used to specify in which directory
the resources are located, as in:
<pre>
jmax -root /home/francois/jmax
</pre>

<p>
<A NAME="arguments"> 
<HR>
<h2>Command Line Arguments</h2>

<P>
<I>j</I>Max uses a number of <I>configuration parameters</I> to parametrize the system
at startup.These parameters appear as TCL variables and can be also set via the command line:

<UL>
  <DT><B><TT>jmax</TT> -&lt;<I>parameter name</I>&gt; &lt;<I>parameter value</I>&gt; . . .</B>
</UL>

<p>
The parameter values given in the command line overwrite all default values given
in the user or site specific configuration files (see down).

<p>
The chapter
<A HREF="configuration.html">configuration</A>
of this documentation explain the different <i>j</i>Max configuration parameters.
At least one of the <A HREF="configuration.html#host">host parameters</A> 
should be set properly in order to start <i>j</i>Max in a default setup.

<P>
The user can implicitly define his own options in the command line using the same syntax
like for the configuration parameters.
For example, the command
<ul>
  <dt><TT>jmax -jmaxHost jack -myOption pho</TT><BR>
</ul>
sets the <i>j</i>Max server host name to <i>jack</i> and the user option
named <i>myOption</i> to the value <i>pho</i> while starting up <i>j</i>Max.
The value of this user option can be accessed through the TCL command
<tt>systemProperty</tt>

<ul>
  <dt><b><tt>systemProperty</tt> &lt;<i>option name</i>&gt;</b>
</ul>

For example in the following construct:

<ul>
  <dt><tt>if{[systemProperty myOption] == "pho"} {...}</tt>
</ul>

<p>
<A NAME=".jmaxrc">
<HR>
<h2>The file <B><TT>.jmaxrc</TT></B></h2>

<P>
The user can customize the <i>j</i>Max environment including the configuration parameters
in the <TT>.jmaxrc</TT> file in his home directory:

<UL>
  <LI>set the <A HREF="configuration.html">configuration</A>
  <LI>customize the <A HREF="project-package.html">project environment</A> for your patches
  <LI>preload <i>j</i>Max <A HREF="project-package.html">packages</A>
</UL>

<P>
The configuration parameters set in the <TT>.jmaxrc</TT> file overwrite the site specific
default values (see down) and they are overwritten by values set via the command line.

<P>
<strong>NOTE:</strong>
In the current release the system and i/o configuration 
<strong>must</strong> be set in the <TT>.jmaxrc</TT> file.

<p>
The file is loaded at startup and can contain any TCL code.<BR>
It is possible to declare declare a number of <I>hooks</I>. 
These hooks contain TCL code that will be executed at precise points during the initialization process.
In particular, the <B><I>start</I></B> hook is executed after server start and must be used for I/O, 
environment and package loading purpose.

<P>
A template <TT>.jmaxrc</TT> file can be found in the distribution.<BR>
An example is given the following:

<PRE>
# Lines starting with # are comments
# --- beginning of .jmaxrc

#set jmaxArch linuxpc
#set jmaxArch irix65r10k
#set jmaxArch irix63r5k

#set jmaxHost "astor.ircam.fr"
#set jmaxHost "amati.ircam.fr"
#set jmaxHost "marimba.ircam.fr"

set jmaxSplashScreen "hide"
set jmaxFastFileBox "true"

when start {

if {$jmaxHost == "astor.ircam.fr"} {
	jmaxSetSampleRate 44100
	jmaxSetAudioBuffer 1024

	openDefaultAudioIn stereoIn1
	openDefaultAudioOut stereoOut1
	openDefaultMidi midi1
} elseif {$jmaxHost=="amati.ircam.fr"} {
	jmaxSetSampleRate 44100
	jmaxSetAudioBuffer 1024

	openDefaultAudioIn adatIn
	openDefaultAudioOut adatOut
	openDefaultMidi midi
}  elseif {$jmaxHost == "marimba.ircam.fr"} {
	jmaxSetSampleRate 32000
	jmaxSetAudioBuffer 2048

	openDefaultAudioIn analogIn
	openDefaultAudioOut analogOut
}
}

# --- end of .jmaxrc
</PRE>

<!-- ---------------------------------------------------------------------- -->
<!-- ---------------------------------------------------------------------- -->
<!-- Beginning of footer                                                    -->
<!-- ---------------------------------------------------------------------- -->
<!-- ---------------------------------------------------------------------- -->

<p>
<table width=100% border=0 cellspacing=0 cellpadding=0>

<tr>
<td><spacer type="block" height="20" width="1"></td>
</tr>

<tr>
<td bgcolor="#cccccc"><spacer type="block" height="1" width="1"></td>
</tr>

<tr>
<td><spacer type="block" height="20" width="1"></td>
</tr>

<tr>
<td align=right><font size=-2>
Copyright &copy; 1995,1999 <a href="http://www.ircam.fr/">IRCAM</a>.<br>
All rights reserved.
</font></td>
</tr>

</table>

</body>
</html>
