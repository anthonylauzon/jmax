#!/bin/sh
major=`awk -F . 'NF==3 {print $1;}' VERSION`
minor=`awk -F . 'NF==3 {print $2;}' VERSION`
patch_level=`awk -F . 'NF==3 {print 1+$3;}' VERSION`

echo "New version number is $major.$minor.$patch_level"

cat << FTS_VERSION_EOF > $2
/* DO NOT EDIT THIS FILE: it is generated automatically by the script ``make-new-version'' */
#define FTS_VERSION_STRING "FTS version $major.$minor.$patch_level\n"
FTS_VERSION_EOF

cat << JAVA_VERSION_EOF > $3
// DO NOT EDIT THIS FILE: it is generated automatically by the script ``make-new-version''
package ircam.jmax;

public class MaxVersion
{
  public static String getMaxVersion()
  {
    return "jMax version $major.$minor.$patch_level";
  } 
}
JAVA_VERSION_EOF

echo $major $minor $patch_level | awk '{printf( "%d.%d.%d\n", $1, $2, $3);}' > $1
