dnl Process this file with autoconf to produce a configure script, as in:
dnl ./configure --with-jmax-include=/u/worksta/dechelle/projects/jmax/include
AC_INIT(fts/version.c.in)

JMAX_MAJOR_VERSION=3
JMAX_MINOR_VERSION=0
JMAX_PATCH_VERSION=0
JMAX_VERSION_STATUS=_latest_cvs
JMAX_VERSION=${JMAX_MAJOR_VERSION}.${JMAX_MINOR_VERSION}.${JMAX_PATCH_VERSION}${JMAX_VERSION_STATUS}

AC_SUBST(JMAX_VERSION)

AM_INIT_AUTOMAKE(jmax,${JMAX_VERSION})

AM_CONFIG_HEADER(include/ftsconfig-ac.h)

dnl Checks for programs.
AC_PROG_CC
if test "$ac_cv_prog_cc" = "no" ; then
   AC_MSG_ERROR([*** No C compiler])
fi
AC_ISC_POSIX
AC_PROG_INSTALL
AC_LIBTOOL_DLOPEN
AM_PROG_LIBTOOL

CFLAGS="-Wall -Wno-unused"

dnl Check for debug
AC_ARG_ENABLE(debug,
  [  --enable-debug[=DEBUG]   compile with debug [default=no]],
  debug="yes",
  debug="no")
case "$debug" in
 yes)
  CFLAGS="$CFLAGS -g"
  AC_DEFINE(DEBUG,1,[Define to enable debug])
  ;;
esac

dnl Checks for libraries.
AC_CHECK_LIB(m, sin)
AC_CHECK_FUNCS(sinf cosf tanf asinf acosf atanf expf logf log10f)

dnl Checks for header files.
AC_HEADER_STDC
AC_HAVE_HEADERS( sys/param.h unistd.h alloca.h sys/time.h time.h sys/socket.h netinet/in.h arpa/inet.h)

dnl Checks for typedefs, structures, and compiler characteristics.
AC_C_CONST
ACX_C_RESTRICT

dnl Checks for library functions.
AC_FUNC_ALLOCA
AC_CHECK_FUNCS(socket)

dnl Check for platform-specific code
PLATFORM=linux
AC_SUBST(PLATFORM)

dnl Absolute pathname of top-level directory
ABS_TOP_SRCDIR=`pwd`
AC_SUBST(ABS_TOP_SRCDIR)

AC_OUTPUT(Makefile fts/Makefile fts/version.c java/src/ircam/jmax/MaxVersion.java)
